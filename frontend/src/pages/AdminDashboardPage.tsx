import { useQuery } from '@tanstack/react-query'; import { api } from '../api/client'; import { Table } from '../components/UI';
export default function AdminDashboardPage(){ const {data}=useQuery({queryKey:['dash'],queryFn:async()=> (await api.get('/admin/dashboard')).data}); if(!data) return null; const m=data.metrics; return <div className='space-y-3'><h1 className='text-xl'>Dashboard</h1><div className='grid grid-cols-2 md:grid-cols-5 gap-2'>{Object.entries(m).map(([k,v])=><div key={k} className='bg-white p-3 rounded'><p className='text-xs'>{k}</p><p className='text-xl'>{Number(v).toFixed(0)}</p></div>)}</div><Table head={['User','Car','Status','Total']} rows={data.recent.map((r:any)=><><td className='p-2'>{r.username}</td><td className='p-2'>{r.car?.brand} {r.car?.model}</td><td className='p-2'>{r.status}</td><td className='p-2'>${r.totalPrice}</td></>)} /></div> }
