import { useForm } from 'react-hook-form'; import { z } from 'zod'; import { zodResolver } from '@hookform/resolvers/zod'; import { useAuth } from '../auth/AuthContext'; import { Link, useNavigate } from 'react-router-dom'; import toast from 'react-hot-toast'; import { Button, Input } from '../components/UI'
const schema=z.object({username:z.string().min(3),password:z.string().min(6)}); export default function RegisterPage(){ const nav=useNavigate(); const {register:doRegister}=useAuth(); const {register,handleSubmit,formState:{errors,isSubmitting}}=useForm({resolver:zodResolver(schema)}); return <div className='max-w-sm mx-auto bg-white p-4 rounded'><h1 className='text-xl mb-3'>Register</h1><form onSubmit={handleSubmit(async(v)=>{try{await doRegister(v.username,v.password);toast.success('Registered');nav('/login')}catch{toast.error('Failed')}})} className='space-y-2'><Input placeholder='Username' {...register('username')}/><p>{errors.username?.message as string}</p><Input type='password' placeholder='Password' {...register('password')}/><p>{errors.password?.message as string}</p><Button disabled={isSubmitting}>Register</Button></form><Link to='/login'>Login</Link></div> }
